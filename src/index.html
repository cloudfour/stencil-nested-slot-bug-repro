<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>Stencil Component Starter</title>

  <script type="module" src="/build/bug-repro.esm.js"></script>
  <script nomodule src="/build/bug-repro.js"></script>
</head>

<body>
  <my-component>
    <nested-component>
      <p>This iFrame works just fine when state updates</p>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/kx_LgXd0uAk" title="YouTube video player"
        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe>
    </nested-component>
  </my-component>

  <button>Dynamically add component</button>

  <script>
    document.querySelector('button').addEventListener('click', () => {
      const component = document.createElement('my-component');
      component.innerHTML = `
        <p>This iFrame reloads when state updates, breaking video playback</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/kx_LgXd0uAk" title="YouTube video player"
          frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
      `;
      document.body.appendChild(component);
    });
  </script>
</body>

</html>
